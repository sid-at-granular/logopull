# Azure Deployment Plan for logopull Project

## **Goal**
Deploy the logopull application to Azure Web App Service using Azure Developer CLI (AZD).

## **Project Information**

**AppName**: logopull
- **Technology Stack**: Node.js 20 with Express.js backend and Vite frontend
- **Application Type**: Web application that extracts logos from websites
- **Frontend**: Vite-built static assets (HTML, CSS, JavaScript)
- **Backend**: Express.js API server with logo extraction functionality
- **Dependencies**: 
  - axios (HTTP client)
  - cheerio (HTML parsing)
  - express (web server)
- **Hosting Recommendation**: Azure Web App Service (Linux) for Node.js hosting

## **Azure Resources Architecture**

```mermaid
graph TB
    User[User] --> AppService[Azure Web App Service]
    AppService --> AppInsights[Application Insights]
    AppService --> LogAnalytics[Log Analytics Workspace]
    
    style AppService fill:#0078d4
    style AppInsights fill:#0078d4
    style LogAnalytics fill:#0078d4
```

**Data Flow**:
- Users access the application through the Azure Web App Service
- Application logs and telemetry are sent to Application Insights
- Logs are stored in Log Analytics Workspace for analysis

## **Recommended Azure Resources**

### Application logopull
- **Hosting Service Type**: Azure Web App Service (Linux)
- **SKU**: B1 (Basic) - 1.75 GB RAM, 1 Core, suitable for development and small production workloads
- **Configuration**:
  - language: nodejs
  - runtime: Node.js 20 LTS
  - Environment Variables:
    - `NODE_ENV=production`
    - `PORT=8080`
    - `WEBSITE_NODE_DEFAULT_VERSION=~20`
    - `APPINSIGHTS_INSTRUMENTATIONKEY` (from Application Insights)
    - `APPLICATIONINSIGHTS_CONNECTION_STRING` (from Application Insights)

### Recommended Supporting Services
- **Application Insights**: For application monitoring and telemetry
- **Log Analytics Workspace**: For centralized log collection and analysis (30-day retention)

## **Execution Steps**

1. **Provision Azure Infrastructure And Deploy the Application**:
   1. Get IaC rules from the tool `iac-rules-get`
   2. Generate IaC (bicep files) for required azure resources based on the plan
   3. Pre-check: use `get_errors` tool to check generated Bicep grammar errors. Fix the errors if exist.
   4. Run the AZD command `azd up` to provision the resources and confirm each resource is created or already exists.
   5. Check the deployment output to ensure the resources are provisioned successfully.
   6. Check the application log with tool `azd-app-log-get` to ensure the services are running.

2. **Summary**:
   1. Summarize the deployment result and save to `.azure/summary.copilotmd`. It should list all changes deployment files and brief description of each file. Then have a diagram showing the provisioned azure resource.

